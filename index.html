<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GymTracker - Rutina 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --bg-card: #1a1a1a;
            --bg-card-hover: #222222;
            --accent: #a3e635;
            --accent-dark: #84cc16;
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border: #2a2a2a;
            --difficulty-easy: #22c55e;
            --difficulty-medium: #f59e0b;
            --difficulty-hard: #ef4444;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: var(--bg-primary);
            font-size: 1.25rem;
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.25rem;
        }

        .logo-text span {
            color: var(--accent);
        }

        .header-badge {
            background: var(--bg-card);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        /* Stage 1 - WOD List */
        #stage1 {
            animation: fadeIn 0.4s ease;
        }

        .stage-header {
            margin-bottom: 2rem;
        }

        .stage-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .stage-title span {
            color: var(--accent);
        }

        .stage-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            padding: 0.625rem 1.25rem;
            border-radius: 25px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent);
            color: var(--text-primary);
        }

        .filter-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--bg-primary);
        }

        /* WOD Grid */
        .wod-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .wod-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .wod-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .wod-card:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(163, 230, 53, 0.1);
        }

        .wod-card:hover::before {
            transform: scaleX(1);
        }

        .wod-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .wod-number {
            background: var(--bg-secondary);
            color: var(--accent);
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        .wod-difficulty {
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .wod-difficulty.easy {
            background: rgba(34, 197, 94, 0.15);
            color: var(--difficulty-easy);
        }

        .wod-difficulty.medium {
            background: rgba(245, 158, 11, 0.15);
            color: var(--difficulty-medium);
        }

        .wod-difficulty.hard {
            background: rgba(239, 68, 68, 0.15);
            color: var(--difficulty-hard);
        }

        .wod-name {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .wod-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1.25rem;
            line-height: 1.5;
        }

        .wod-meta {
            display: flex;
            gap: 1.5rem;
        }

        .wod-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .wod-meta-item svg {
            width: 16px;
            height: 16px;
            color: var(--accent);
        }

        .wod-meta-item span {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Stage 2 - WOD Detail */
        #stage2 {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.75rem 1.25rem;
            border-radius: 10px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 2rem;
        }

        .back-btn:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent);
        }

        .back-btn svg {
            width: 18px;
            height: 18px;
        }

        .detail-header {
            background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .detail-badges {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .detail-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .detail-description {
            color: var(--text-secondary);
            font-size: 1.125rem;
            margin-bottom: 1.5rem;
        }

        .detail-stats {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .detail-stat {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .detail-stat-icon {
            width: 44px;
            height: 44px;
            background: rgba(163, 230, 53, 0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .detail-stat-icon svg {
            width: 22px;
            height: 22px;
            color: var(--accent);
        }

        .detail-stat-info {
            display: flex;
            flex-direction: column;
        }

        .detail-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .detail-stat-value {
            font-size: 1.125rem;
            font-weight: 600;
        }

        /* Sections */
        .section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.25rem;
        }

        .section-icon {
            width: 36px;
            height: 36px;
            background: rgba(163, 230, 53, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .section-icon svg {
            width: 18px;
            height: 18px;
            color: var(--accent);
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 700;
        }

        .section-time {
            margin-left: auto;
            background: var(--bg-secondary);
            padding: 0.375rem 0.875rem;
            border-radius: 8px;
            font-size: 0.875rem;
            color: var(--accent);
            font-weight: 600;
        }

        .section-subtitle {
            color: var(--accent);
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .exercise-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .exercise-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.875rem 1rem;
            background: var(--bg-secondary);
            border-radius: 10px;
            transition: all 0.2s ease;
        }

        .exercise-item:hover {
            background: var(--bg-card-hover);
        }

        .exercise-number {
            width: 28px;
            height: 28px;
            background: var(--accent);
            color: var(--bg-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .exercise-name {
            font-weight: 500;
            flex: 1;
        }

        .exercise-note {
            color: var(--accent);
            font-size: 0.875rem;
            font-weight: 600;
        }

        /* Tips Section */
        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }

        .tip-item {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 1rem;
            display: flex;
            gap: 0.875rem;
        }

        .tip-icon {
            width: 24px;
            height: 24px;
            color: var(--accent);
            flex-shrink: 0;
        }

        .tip-content h4 {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .tip-content p {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        /* Start Button */
        .start-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            width: 100%;
            background: var(--accent);
            color: var(--bg-primary);
            border: none;
            padding: 1.125rem 2rem;
            border-radius: 12px;
            font-size: 1.125rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 1rem;
        }

        .start-btn:hover {
            background: var(--accent-dark);
            transform: scale(1.02);
        }

        .start-btn svg {
            width: 24px;
            height: 24px;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive */
        /* Video Modal */
        .video-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 200;
            align-items: center;
            justify-content: center;
        }

        .video-modal-overlay.active {
            display: flex;
        }

        .video-modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            max-width: 400px;
            width: 90%;
            max-height: 90vh;
            position: relative;
            overflow: hidden;
        }

        .video-modal-close {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            z-index: 10;
            transition: all 0.2s ease;
        }

        .video-modal-close:hover {
            background: var(--accent);
            color: var(--bg-primary);
        }

        .video-modal-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-right: 2.5rem;
            color: var(--accent);
        }

        .video-modal-body {
            overflow-y: auto;
            max-height: calc(90vh - 5rem);
        }

        .video-modal-body iframe {
            width: 100%;
            height: 740px;
            border: none;
            border-radius: 8px;
        }

        .exercise-video-btn {
            background: rgba(163, 230, 53, 0.15);
            border: none;
            color: var(--accent);
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }

        .exercise-video-btn:hover {
            background: var(--accent);
            color: var(--bg-primary);
        }

        /* Section Timer */
        .section-timer {
            margin-top: 1.25rem;
            padding-top: 1.25rem;
            border-top: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .timer-display {
            font-size: 2.5rem;
            font-weight: 800;
            font-variant-numeric: tabular-nums;
            color: var(--text-primary);
            min-width: 130px;
            text-align: center;
        }

        .timer-controls {
            display: flex;
            gap: 0.5rem;
        }

        .timer-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.625rem 1.25rem;
            border-radius: 10px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid var(--border);
        }

        .timer-btn svg {
            width: 18px;
            height: 18px;
        }

        .timer-btn.start {
            background: var(--accent);
            color: var(--bg-primary);
            border-color: var(--accent);
        }

        .timer-btn.start:hover {
            background: var(--accent-dark);
        }

        .timer-btn.pause {
            background: var(--bg-secondary);
            color: var(--difficulty-medium);
            border-color: var(--difficulty-medium);
        }

        .timer-btn.pause:hover {
            background: rgba(245, 158, 11, 0.15);
        }

        .timer-btn.reset {
            background: var(--bg-secondary);
            color: var(--text-secondary);
        }

        .timer-btn.reset:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .timer-btn:disabled {
            opacity: 0.35;
            cursor: not-allowed;
        }

        .timer-btn:disabled:hover {
            background: var(--bg-secondary);
        }

        .timer-finished .timer-display {
            animation: timerFlash 0.8s ease-in-out infinite;
        }

        @keyframes timerFlash {
            0%, 100% { color: var(--difficulty-hard); }
            50% { color: transparent; }
        }

        @media (max-width: 768px) {
            .header-badge {
                display: none;
            }

            .stage-title {
                font-size: 1.5rem;
            }

            .detail-title {
                font-size: 1.75rem;
            }

            .detail-stats {
                gap: 1rem;
            }

            .wod-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">G</div>
                <div class="logo-text">Gym<span>Tracker</span></div>
            </div>
            <div class="header-badge">Rutina 2026</div>
        </div>
    </header>

    <main class="container">
        <!-- Stage 1: WOD List -->
        <section id="stage1">
            <div class="stage-header">
                <h1 class="stage-title">Jaz, Andrés, escojan su <span>WOD</span> de hoy</h1>
                <p class="stage-subtitle">10 entrenamientos intensos para llevar tu fitness al siguiente nivel</p>
            </div>

            <div class="filters">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="easy">Fácil</button>
                <button class="filter-btn" data-filter="medium">Medio</button>
                <button class="filter-btn" data-filter="hard">Difícil</button>
            </div>

            <div class="wod-grid" id="wodGrid">
                <!-- WOD cards will be inserted here -->
            </div>
        </section>

        <!-- Stage 2: WOD Detail -->
        <section id="stage2">
            <button class="back-btn" onclick="showStage1()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Volver a WODs
            </button>

            <div id="wodDetail">
                <!-- Detail content will be inserted here -->
            </div>
        </section>
    </main>

    <!-- Video Modal -->
    <div class="video-modal-overlay" id="videoModal" onclick="if(event.target===this)closeVideoModal()">
        <div class="video-modal">
            <button class="video-modal-close" onclick="closeVideoModal()">&#10005;</button>
            <h3 class="video-modal-title" id="videoModalTitle"></h3>
            <div class="video-modal-body" id="videoModalBody"></div>
        </div>
    </div>

    <script>
        // WOD Data
        const wods = [
            {
                id: 1,
                name: "DT Adaptado",
                description: "Clásico benchmark de fuerza con mancuernas. Enfocado en movimientos de levantamiento olímpico adaptados.",
                difficulty: "medium",
                difficultyLabel: "Medio",
                totalTime: 20,
                warmup: {
                    time: 5,
                    format: "AMRAP 5min",
                    exercises: [
                        { name: "Air Squats", reps: "10" },
                        { name: "Jumping Jacks", reps: "10" },
                        { name: "Leg Raises", reps: "10" },
                        { name: "Burpees (sin push-up)", reps: "5" }
                    ]
                },
                main: {
                    time: 15,
                    format: "5 rounds for time",
                    exercises: [
                        { name: "DB Deadlifts", reps: "12" },
                        { name: "DB Hang Power Cleans", reps: "9", video: "7584871443297619214" },
                        { name: "DB Push Jerks", reps: "6", video: "7490660216896474414" }
                    ],
                    notes: "DBs moderados (15-20kg c/u)"
                },
                tips: [
                    { title: "Deadlift", desc: "Mantén la espalda recta y empuja con las piernas" },
                    { title: "Hang Clean", desc: "El movimiento viene de la cadera, no de los brazos" },
                    { title: "Push Jerk", desc: "Usa las piernas para impulsar el peso sobre la cabeza" }
                ]
            },
            {
                id: 2,
                name: "The Seven Adaptado",
                description: "WOD en honor a los 7 agentes de la CIA. Trabajo de cuerpo completo con kettlebell y peso corporal.",
                difficulty: "hard",
                difficultyLabel: "Difícil",
                totalTime: 20,
                warmup: {
                    time: 5,
                    format: "AMRAP 5min",
                    exercises: [
                        { name: "Push-ups", reps: "10" },
                        { name: "DB Bent-over Rows (ligeros)", reps: "10" },
                        { name: "Plank", reps: "30seg" },
                        { name: "Shoulder Taps", reps: "10" }
                    ]
                },
                main: {
                    time: 15,
                    format: "7 rounds",
                    exercises: [
                        { name: "KB Swings", reps: "7", note: "24/32kg" },
                        { name: "Burpees", reps: "7" },
                        { name: "Goblet Squats", reps: "7" }
                    ]
                },
                tips: [
                    { title: "KB Swing", desc: "El poder viene de la cadera, los brazos solo guían" },
                    { title: "Burpees", desc: "Mantén un ritmo constante, no sprintes al inicio" },
                    { title: "Goblet Squat", desc: "Pecho arriba, codos adentro de las rodillas" }
                ]
            },
            {
                id: 3,
                name: "Randy Modificado",
                description: "Alto volumen de snatches con descanso activo. Excelente para potencia unilateral.",
                difficulty: "medium",
                difficultyLabel: "Medio",
                totalTime: 20,
                warmup: {
                    time: 5,
                    format: "EMOM 5min",
                    exercises: [
                        { name: "Min 1: Air Squats", reps: "15" },
                        { name: "Min 2: Mountain Climbers", reps: "20" },
                        { name: "Min 3: Reverse Lunges", reps: "10 c/pierna" },
                        { name: "Min 4: Sit-ups", reps: "15" },
                        { name: "Min 5: Jump Squats", reps: "10" }
                    ]
                },
                main: {
                    time: 15,
                    format: "For time",
                    exercises: [
                        { name: "DB Snatches (alternando brazos)", reps: "50", video: "7544474427631684919" }
                    ],
                    notes: "Cada 2min: 10 push-ups | DB moderado (15-20kg)"
                },
                tips: [
                    { title: "Snatch", desc: "Un movimiento fluido desde el suelo hasta arriba" },
                    { title: "Ritmo", desc: "Los push-ups son descanso activo, no sprintes" },
                    { title: "Agarre", desc: "Cambia de mano en la parte alta del movimiento" }
                ]
            },
            {
                id: 4,
                name: "Kalsu Version",
                description: "Brutal combo de thrusters con burpees cada minuto. Solo para los más valientes.",
                difficulty: "hard",
                difficultyLabel: "Difícil",
                totalTime: 40,
                warmup: {
                    time: 10,
                    format: "2 rounds",
                    exercises: [
                        { name: "Air Squats", reps: "15" },
                        { name: "Push-ups", reps: "10" },
                        { name: "DB Swings ligeros", reps: "10" },
                        { name: "Inchworms", reps: "10", video: "7458390246472813830" },
                        { name: "Jumping Jacks", reps: "15" },
                        { name: "Mountain Climbers", reps: "20" }
                    ]
                },
                main: {
                    time: 30,
                    format: "For time",
                    exercises: [
                        { name: "DB Thrusters", reps: "100" }
                    ],
                    notes: "Cada minuto (on the minute): 5 burpees | DBs moderados (10-15kg c/u)"
                },
                tips: [
                    { title: "Estrategia", desc: "Rompe los thrusters en sets manejables" },
                    { title: "Burpees", desc: "Hazlos rápido para maximizar tiempo de trabajo" },
                    { title: "Respiración", desc: "Exhala en la parte alta del thruster" }
                ]
            },
            {
                id: 5,
                name: "Dirty Thirty",
                description: "30 reps de 7 ejercicios diferentes. Trabajo completo de todo el cuerpo con finisher de core.",
                difficulty: "hard",
                difficultyLabel: "Difícil",
                totalTime: 50,
                warmup: {
                    time: 10,
                    format: "2 rounds",
                    exercises: [
                        { name: "Air Squats", reps: "15" },
                        { name: "Push-ups", reps: "10" },
                        { name: "DB Swings ligeros", reps: "10" },
                        { name: "Inchworms", reps: "10", video: "7458390246472813830" },
                        { name: "Jumping Jacks", reps: "15" },
                        { name: "Mountain Climbers", reps: "20" }
                    ]
                },
                main: {
                    time: 30,
                    format: "30 reps de cada, for time",
                    exercises: [
                        { name: "Jump Squats (o Air Squats)", reps: "30" },
                        { name: "Renegade Rows con DB", reps: "30" },
                        { name: "KB Swings", reps: "30" },
                        { name: "Reverse Lunges alternados", reps: "30 c/pierna" },
                        { name: "Burpees", reps: "30" },
                        { name: "Push-ups", reps: "30" },
                        { name: "Sit-ups", reps: "30" }
                    ]
                },
                finisher: {
                    time: 10,
                    format: "4 rondas",
                    exercises: [
                        { name: "Plank", reps: "45seg" },
                        { name: "Leg Raises", reps: "15" },
                        { name: "Burpees", reps: "10" },
                        { name: "Hollow Hold", reps: "30seg" }
                    ]
                },
                tips: [
                    { title: "Renegade Row", desc: "Cuerpo recto, sin rotar la cadera" },
                    { title: "Pacing", desc: "Es largo, mantén un ritmo sostenible" },
                    { title: "Core Finisher", desc: "Respira profundo en las posiciones isométricas" }
                ]
            },
            {
                id: 6,
                name: "Annie Adaptado",
                description: "Clásico workout descendente 50-40-30-20-10. Push press y sit-ups en carrera contra el reloj.",
                difficulty: "easy",
                difficultyLabel: "Fácil",
                totalTime: 20,
                warmup: {
                    time: 5,
                    format: "EMOM 5min",
                    exercises: [
                        { name: "Min 1: Reverse Lunges alternados", reps: "20" },
                        { name: "Min 2: Glute Bridges", reps: "15" },
                        { name: "Min 3: Jumping Jacks", reps: "20" },
                        { name: "Min 4: Air Squats", reps: "15" },
                        { name: "Min 5: Jump Squats", reps: "10" }
                    ]
                },
                main: {
                    time: 15,
                    format: "50-40-30-20-10 reps for time",
                    exercises: [
                        { name: "DB Push Press (moderado)", reps: "50-40-30-20-10" },
                        { name: "Sit-ups", reps: "50-40-30-20-10" }
                    ]
                },
                tips: [
                    { title: "Push Press", desc: "Usa las piernas para generar impulso" },
                    { title: "Sit-ups", desc: "Ancla los pies o usa abmat para más rango" },
                    { title: "Estrategia", desc: "Las primeras rondas son las más largas, pace inteligente" }
                ]
            },
            {
                id: 7,
                name: "Fran Adaptado",
                description: "El benchmark más famoso del CrossFit en versión accesible. 21-15-9 de pura intensidad.",
                difficulty: "medium",
                difficultyLabel: "Medio",
                totalTime: 20,
                warmup: {
                    time: 5,
                    format: "AMRAP 5min",
                    exercises: [
                        { name: "Push-ups", reps: "10" },
                        { name: "DB Bent-over Rows (ligeros)", reps: "10" },
                        { name: "Side Plank", reps: "30seg c/lado" },
                        { name: "Inchworms", reps: "10", video: "7458390246472813830" }
                    ]
                },
                main: {
                    time: 15,
                    format: "21-15-9 reps for time",
                    exercises: [
                        { name: "KB Swings", reps: "21-15-9", note: "24/32kg" },
                        { name: "DB Thrusters", reps: "21-15-9", note: "12-15kg c/u" },
                        { name: "Burpees", reps: "21-15-9" }
                    ]
                },
                tips: [
                    { title: "21s", desc: "No vayas all-out, guarda para las últimas rondas" },
                    { title: "Transiciones", desc: "Minimiza el descanso entre ejercicios" },
                    { title: "Burpees", desc: "Encuentra un ritmo que puedas mantener" }
                ]
            },
            {
                id: 8,
                name: "Double Grace Adaptado",
                description: "60 clean & jerks contra el reloj. Potencia explosiva y resistencia muscular.",
                difficulty: "medium",
                difficultyLabel: "Medio",
                totalTime: 20,
                warmup: {
                    time: 5,
                    format: "AMRAP 5min",
                    exercises: [
                        { name: "Air Squats", reps: "15" },
                        { name: "Reverse Lunges", reps: "10 c/pierna" },
                        { name: "Mountain Climbers", reps: "15" },
                        { name: "Sit-ups", reps: "10" }
                    ]
                },
                main: {
                    time: 15,
                    format: "For time",
                    exercises: [
                        { name: "DB Clean & Jerks", reps: "60", video: "7584871443297619214" }
                    ],
                    notes: "Alterna brazos cada 5 reps | DB moderado (15-20kg)"
                },
                tips: [
                    { title: "Clean", desc: "Recibe el peso en rack position con codos altos" },
                    { title: "Jerk", desc: "Dip-drive-press, usa las piernas" },
                    { title: "Ritmo", desc: "5 reps por lado mantiene el trabajo equilibrado" }
                ]
            },
            {
                id: 9,
                name: "Mini Murph",
                description: "Versión adaptada del legendario Murph. Trabajo de alto volumen con opción de particionar.",
                difficulty: "hard",
                difficultyLabel: "Difícil",
                totalTime: 50,
                warmup: {
                    time: 10,
                    format: "3 rounds",
                    exercises: [
                        { name: "Inchworms", reps: "10", video: "7458390246472813830" },
                        { name: "Air Squats", reps: "15" },
                        { name: "DB Swings ligeros", reps: "10" },
                        { name: "Push-ups", reps: "10" },
                        { name: "Mountain Climbers", reps: "20" },
                        { name: "Plank", reps: "30seg" }
                    ]
                },
                main: {
                    time: 30,
                    format: "For time",
                    exercises: [
                        { name: "Marcha/trote en sitio (o 2min burpees)", reps: "400m" },
                        { name: "DB Bent-over Rows", reps: "25", note: "15kg c/u" },
                        { name: "Push-ups", reps: "50" },
                        { name: "Air Squats", reps: "75" },
                        { name: "Marcha/trote (o 2min burpees)", reps: "400m" }
                    ],
                    notes: "Puedes particionar: 5 rounds de 5-10-15"
                },
                finisher: {
                    time: 10,
                    format: "4 rondas",
                    exercises: [
                        { name: "Plank", reps: "30seg" },
                        { name: "Side Plank derecho", reps: "30seg" },
                        { name: "Side Plank izquierdo", reps: "30seg" },
                        { name: "Leg Raises", reps: "15" },
                        { name: "Burpees", reps: "10" }
                    ]
                },
                tips: [
                    { title: "Partición", desc: "5 rounds de 5-10-15 es más manejable" },
                    { title: "Push-ups", desc: "Rompe en sets antes de fallar" },
                    { title: "Cardio", desc: "Los 400m son para mantener ritmo, no sprint" }
                ]
            },
            {
                id: 10,
                name: "Cindy Extended",
                description: "AMRAP de 30 minutos del clásico Cindy. Resistencia muscular y mental al máximo.",
                difficulty: "easy",
                difficultyLabel: "Fácil",
                totalTime: 50,
                warmup: {
                    time: 10,
                    format: "3 rounds",
                    exercises: [
                        { name: "Inchworms", reps: "10", video: "7458390246472813830" },
                        { name: "Air Squats", reps: "15" },
                        { name: "DB Swings ligeros", reps: "10" },
                        { name: "Push-ups", reps: "10" },
                        { name: "Mountain Climbers", reps: "20" },
                        { name: "Plank", reps: "30seg" }
                    ]
                },
                main: {
                    time: 30,
                    format: "AMRAP 30min",
                    exercises: [
                        { name: "Push-ups", reps: "5" },
                        { name: "Air Squats", reps: "10" },
                        { name: "KB Swings", reps: "15" }
                    ]
                },
                finisher: {
                    time: 10,
                    format: "4 rondas",
                    exercises: [
                        { name: "Plank", reps: "30seg" },
                        { name: "Side Plank derecho", reps: "30seg" },
                        { name: "Side Plank izquierdo", reps: "30seg" },
                        { name: "Leg Raises", reps: "15" },
                        { name: "Burpees", reps: "10" }
                    ]
                },
                tips: [
                    { title: "AMRAP", desc: "Cuenta tus rondas, el objetivo es mejorar cada vez" },
                    { title: "Consistencia", desc: "Mejor 1 ronda cada 90seg que quemar rápido" },
                    { title: "Push-ups", desc: "Solo 5, hazlos con buena forma siempre" }
                ]
            }
        ];

        // Render WOD Cards
        function renderWodCards(filter = 'all') {
            const grid = document.getElementById('wodGrid');
            const filteredWods = filter === 'all' ? wods : wods.filter(w => w.difficulty === filter);

            grid.innerHTML = filteredWods.map(wod => `
                <div class="wod-card" onclick="showWodDetail(${wod.id})" data-difficulty="${wod.difficulty}">
                    <div class="wod-card-header">
                        <span class="wod-number">WOD-${String(wod.id).padStart(2, '0')}</span>
                        <span class="wod-difficulty ${wod.difficulty}">${wod.difficultyLabel}</span>
                    </div>
                    <h3 class="wod-name">${wod.name}</h3>
                    <p class="wod-description">${wod.description}</p>
                    <div class="wod-meta">
                        <div class="wod-meta-item">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span>${wod.totalTime} min</span>
                        </div>
                        <div class="wod-meta-item">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                            <span>${wod.main.exercises.length} ejercicios</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Show WOD Detail
        function showWodDetail(id) {
            const wod = wods.find(w => w.id === id);
            if (!wod) return;

            clearAllTimers();
            document.getElementById('stage1').style.display = 'none';
            document.getElementById('stage2').style.display = 'block';

            const detail = document.getElementById('wodDetail');
            detail.innerHTML = `
                <div class="detail-header">
                    <div class="detail-badges">
                        <span class="wod-number">WOD-${String(wod.id).padStart(2, '0')}</span>
                        <span class="wod-difficulty ${wod.difficulty}">${wod.difficultyLabel}</span>
                    </div>
                    <h1 class="detail-title">${wod.name}</h1>
                    <p class="detail-description">${wod.description}</p>
                    <div class="detail-stats">
                        <div class="detail-stat">
                            <div class="detail-stat-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <div class="detail-stat-info">
                                <span class="detail-stat-label">Tiempo Total</span>
                                <span class="detail-stat-value">${wod.totalTime} minutos</span>
                            </div>
                        </div>
                        <div class="detail-stat">
                            <div class="detail-stat-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z" />
                                </svg>
                            </div>
                            <div class="detail-stat-info">
                                <span class="detail-stat-label">Calentamiento</span>
                                <span class="detail-stat-value">${wod.warmup.time} min</span>
                            </div>
                        </div>
                        <div class="detail-stat">
                            <div class="detail-stat-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            <div class="detail-stat-info">
                                <span class="detail-stat-label">WOD Principal</span>
                                <span class="detail-stat-value">${wod.main.time} min</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Warmup Section -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z" />
                            </svg>
                        </div>
                        <h2 class="section-title">Calentamiento</h2>
                        <span class="section-time">${wod.warmup.time} min</span>
                    </div>
                    <div class="section-subtitle">${wod.warmup.format}</div>
                    <div class="exercise-list">
                        ${wod.warmup.exercises.map((ex, i) => `
                            <div class="exercise-item">
                                <span class="exercise-number">${i + 1}</span>
                                <span class="exercise-name">${ex.name}</span>
                                <span class="exercise-note">${ex.reps}</span>
                                ${ex.video ? `<button class="exercise-video-btn" onclick="event.stopPropagation();openVideoModal('${ex.video}', '${ex.name}')" title="Ver demo">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </button>` : ''}
                            </div>
                        `).join('')}
                    </div>
                    <div class="section-timer" id="timer-warmup">
                        <span class="timer-display">${String(wod.warmup.time).padStart(2,'0')}:00</span>
                        <div class="timer-controls">
                            <button class="timer-btn start" onclick="startTimer('warmup')">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /></svg>
                                Iniciar
                            </button>
                            <button class="timer-btn pause" onclick="pauseTimer('warmup')" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6" /></svg>
                                Pausar
                            </button>
                            <button class="timer-btn reset" onclick="resetTimer('warmup', ${wod.warmup.time})" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                                Reset
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Main WOD Section -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <h2 class="section-title">WOD Principal</h2>
                        <span class="section-time">${wod.main.time} min</span>
                    </div>
                    <div class="section-subtitle">${wod.main.format}</div>
                    <div class="exercise-list">
                        ${wod.main.exercises.map((ex, i) => `
                            <div class="exercise-item">
                                <span class="exercise-number">${i + 1}</span>
                                <span class="exercise-name">${ex.name}${ex.note ? ` (${ex.note})` : ''}</span>
                                <span class="exercise-note">${ex.reps}</span>
                                ${ex.video ? `<button class="exercise-video-btn" onclick="event.stopPropagation();openVideoModal('${ex.video}', '${ex.name}')" title="Ver demo">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </button>` : ''}
                            </div>
                        `).join('')}
                    </div>
                    ${wod.main.notes ? `<p style="margin-top: 1rem; padding: 0.875rem; background: var(--bg-secondary); border-radius: 8px; color: var(--accent); font-size: 0.875rem;">
                        <strong>Nota:</strong> ${wod.main.notes}
                    </p>` : ''}
                    <div class="section-timer" id="timer-main">
                        <span class="timer-display">${String(wod.main.time).padStart(2,'0')}:00</span>
                        <div class="timer-controls">
                            <button class="timer-btn start" onclick="startTimer('main')">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /></svg>
                                Iniciar
                            </button>
                            <button class="timer-btn pause" onclick="pauseTimer('main')" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6" /></svg>
                                Pausar
                            </button>
                            <button class="timer-btn reset" onclick="resetTimer('main', ${wod.main.time})" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                                Reset
                            </button>
                        </div>
                    </div>
                </div>

                ${wod.finisher ? `
                <!-- Core Finisher Section -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>
                        <h2 class="section-title">Core Finisher</h2>
                        <span class="section-time">${wod.finisher.time} min</span>
                    </div>
                    <div class="section-subtitle">${wod.finisher.format}</div>
                    <div class="exercise-list">
                        ${wod.finisher.exercises.map((ex, i) => `
                            <div class="exercise-item">
                                <span class="exercise-number">${i + 1}</span>
                                <span class="exercise-name">${ex.name}</span>
                                <span class="exercise-note">${ex.reps}</span>
                                ${ex.video ? `<button class="exercise-video-btn" onclick="event.stopPropagation();openVideoModal('${ex.video}', '${ex.name}')" title="Ver demo">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </button>` : ''}
                            </div>
                        `).join('')}
                    </div>
                    <div class="section-timer" id="timer-finisher">
                        <span class="timer-display">${String(wod.finisher.time).padStart(2,'0')}:00</span>
                        <div class="timer-controls">
                            <button class="timer-btn start" onclick="startTimer('finisher')">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /></svg>
                                Iniciar
                            </button>
                            <button class="timer-btn pause" onclick="pauseTimer('finisher')" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6" /></svg>
                                Pausar
                            </button>
                            <button class="timer-btn reset" onclick="resetTimer('finisher', ${wod.finisher.time})" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                                Reset
                            </button>
                        </div>
                    </div>
                </div>
                ` : ''}

                <!-- Tips Section -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                            </svg>
                        </div>
                        <h2 class="section-title">Tips & Tecnica</h2>
                    </div>
                    <div class="tips-grid">
                        ${wod.tips.map(tip => `
                            <div class="tip-item">
                                <svg class="tip-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <div class="tip-content">
                                    <h4>${tip.title}</h4>
                                    <p>${tip.desc}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

            `;

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Timers
        const timers = {};
        let audioCtx = null;

        function getAudioContext() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            return audioCtx;
        }

        function playAlarmSound() {
            const ctx = getAudioContext();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.frequency.value = 800;
            osc.type = 'square';
            gain.gain.setValueAtTime(0.3, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 1.5);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 1.5);
        }

        function clearAllTimers() {
            Object.keys(timers).forEach(key => {
                if (timers[key].intervalId) clearInterval(timers[key].intervalId);
            });
            Object.keys(timers).forEach(key => delete timers[key]);
        }

        function updateTimerDisplay(section) {
            const el = document.querySelector(`#timer-${section} .timer-display`);
            if (!el) return;
            const t = timers[section];
            const min = Math.floor(t.timeLeft / 60);
            const sec = t.timeLeft % 60;
            el.textContent = `${String(min).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
        }

        function startTimer(section) {
            const container = document.getElementById(`timer-${section}`);
            if (!container) return;

            if (!timers[section]) {
                const min = parseInt(container.closest('.section').querySelector('.section-time').textContent);
                timers[section] = { timeLeft: min * 60, originalTime: min * 60, isRunning: false, intervalId: null };
            }

            const t = timers[section];
            if (t.isRunning || t.timeLeft <= 0) return;

            t.isRunning = true;
            container.classList.remove('timer-finished');
            container.querySelector('.start').disabled = true;
            container.querySelector('.pause').disabled = false;
            container.querySelector('.reset').disabled = false;

            t.intervalId = setInterval(() => {
                t.timeLeft--;
                updateTimerDisplay(section);
                if (t.timeLeft <= 0) {
                    clearInterval(t.intervalId);
                    t.intervalId = null;
                    t.isRunning = false;
                    container.classList.add('timer-finished');
                    container.querySelector('.pause').disabled = true;
                    playAlarmSound();
                }
            }, 1000);
        }

        function pauseTimer(section) {
            const t = timers[section];
            const container = document.getElementById(`timer-${section}`);
            if (!t || !t.isRunning) return;

            clearInterval(t.intervalId);
            t.intervalId = null;
            t.isRunning = false;
            container.querySelector('.start').disabled = false;
            container.querySelector('.pause').disabled = true;
        }

        function resetTimer(section, minutes) {
            const t = timers[section];
            const container = document.getElementById(`timer-${section}`);
            if (!t) return;

            if (t.intervalId) clearInterval(t.intervalId);
            t.timeLeft = minutes * 60;
            t.isRunning = false;
            t.intervalId = null;
            container.classList.remove('timer-finished');
            container.querySelector('.start').disabled = false;
            container.querySelector('.pause').disabled = true;
            container.querySelector('.reset').disabled = true;
            updateTimerDisplay(section);
        }

        // Show Stage 1
        function showStage1() {
            clearAllTimers();
            document.getElementById('stage2').style.display = 'none';
            document.getElementById('stage1').style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Video Modal
        function openVideoModal(videoId, exerciseName) {
            const modal = document.getElementById('videoModal');
            const title = document.getElementById('videoModalTitle');
            const body = document.getElementById('videoModalBody');
            title.textContent = exerciseName;
            body.innerHTML = `<iframe src="https://www.tiktok.com/embed/v2/${videoId}" allowfullscreen></iframe>`;
            modal.classList.add('active');
        }

        function closeVideoModal() {
            const modal = document.getElementById('videoModal');
            const body = document.getElementById('videoModalBody');
            modal.classList.remove('active');
            body.innerHTML = '';
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeVideoModal();
        });

        // Filter handlers
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                renderWodCards(btn.dataset.filter);
            });
        });

        // Initialize
        renderWodCards();
    </script>
</body>
</html>
